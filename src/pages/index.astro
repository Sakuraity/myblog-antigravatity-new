---
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const posts = (await getCollection('posts')).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Kangyuan's Blog">
	<!-- Hero Section -->
	<section class="py-20 md:py-32">
		<h1 class="font-serif text-5xl md:text-7xl font-bold mb-8 text-text-light dark:text-text-dark tracking-tight leading-none">
			Hammer Seeking Nail: <br/> <span class="text-primary/90">Logic · Emotion · Elegance</span>
		</h1>
		<p class="text-xl md:text-2xl text-text-muted-light dark:text-text-muted-dark max-w-2xl leading-relaxed italic font-serif">
			安放思考，自由表达，分享创造
		</p>
	</section>

	<hr class="border-black/5 dark:border-white/10 mb-16" />

	<!-- Latest Posts -->
	<section>
		<div class="flex items-center justify-between mb-12">
			<h2 class="font-serif text-2xl font-bold text-text-light dark:text-text-dark">Latest Writing</h2>
			<a href="/blog" class="group flex items-center gap-1 text-sm font-medium text-text-muted-light dark:text-text-muted-dark hover:text-primary transition-colors">
				View all 
				<span class="group-hover:translate-x-1 transition-transform">&rarr;</span>
			</a>
		</div>
		
		<div class="flex flex-col gap-16">
			{posts.slice(0, 5).map((post) => (
				<article class="group relative grid grid-cols-1 md:grid-cols-4 gap-6 md:gap-8 items-baseline">
					<div class="md:col-span-1 text-sm font-medium text-text-muted-light dark:text-text-muted-dark font-sans">
						<time datetime={post.data.pubDate.toISOString()}>
							{post.data.pubDate.toLocaleDateString('zh-CN', {
								year: 'numeric',
								month: 'long',
								day: 'numeric',
							})}
						</time>
					</div>
					
					<div class="md:col-span-3 flex flex-col space-y-3">
						<h2 class="text-2xl font-serif font-bold leading-tight text-text-light dark:text-text-dark group-hover:text-primary transition-colors duration-200">
							<a href={`/posts/${post.slug}/`}>
								<span class="absolute inset-0"></span>
								{post.data.title}
							</a>
						</h2>
						<p class="text-base text-text-muted-light dark:text-text-muted-dark leading-relaxed line-clamp-2">
							{post.data.description}
						</p>
						<div class="flex flex-col gap-2 pt-2">
							{post.data.category && (
								<span class="text-xs font-medium uppercase tracking-widest text-primary">{post.data.category}</span>
							)}
							{post.data.tags && post.data.tags.length > 0 && (
								<div class="flex flex-wrap gap-2 relative z-10">
									{post.data.tags.slice(0, 3).map(tag => (
										<a href={`/tags/${tag}`} class="text-xs font-medium text-text-muted-light dark:text-text-muted-dark bg-gray-100 dark:bg-white/5 px-2 py-0.5 rounded hover:bg-gray-200 dark:hover:bg-white/10 transition-colors duration-200">
											#{tag}
										</a>
									))}
								</div>
							)}
						</div>
					</div>
				</article>
			))}
		</div>
	</section>
</Layout>
